
# StreamMatch

Una aplicación al estilo Tinder para conectar streamers que quieren colaborar.

## 🎯 Funcionalidades

- **Autenticación con Supabase**: Registro e inicio de sesión seguros
- **Perfiles de Streamers**: Personaliza tu perfil con juegos y descripción
- **Explora Streamers**: Swipe para conectar o pasar
- **Matches automáticos**: Cuando hay interés mutuo
- **Interfaz móvil**: Diseñada para pantallas de smartphone

## 💻 Tecnologías

- **Frontend**: React, TypeScript, Tailwind CSS, Framer Motion
- **Backend**: Supabase (Autenticación, Base de datos)
- **Estado**: Zustand
- **Estilo**: Tema oscuro inspirado en Twitch

## 🚀 Requisitos para ejecutar

1. Configura un proyecto en Supabase con las siguientes tablas:

### Tabla: profiles
```sql
create table profiles (
  id uuid references auth.users on delete cascade not null primary key,
  username text not null,
  avatar_url text,
  games text[] default '{}',
  description text,
  created_at timestamp with time zone default now() not null,
  updated_at timestamp with time zone
);

-- Create policies
alter table profiles enable row level security;
create policy "Users can view any profile" on profiles
  for select using (true);
create policy "Users can update their own profile" on profiles
  for update using (auth.uid() = id);
```

### Tabla: swipes
```sql
create table swipes (
  id bigint generated by default as identity primary key,
  swiper_id uuid references profiles(id) on delete cascade not null,
  target_id uuid references profiles(id) on delete cascade not null,
  direction text not null check (direction in ('left', 'right')),
  created_at timestamp with time zone default now() not null,
  unique(swiper_id, target_id)
);

-- Create policies
alter table swipes enable row level security;
create policy "Users can view their own swipes" on swipes
  for select using (auth.uid() = swiper_id);
create policy "Users can insert their own swipes" on swipes
  for insert with check (auth.uid() = swiper_id);
```

### Tabla: matches
```sql
create table matches (
  id bigint generated by default as identity primary key,
  user_a uuid references profiles(id) on delete cascade not null,
  user_b uuid references profiles(id) on delete cascade not null,
  created_at timestamp with time zone default now() not null,
  unique(user_a, user_b),
  check (user_a < user_b)
);

-- Create policies
alter table matches enable row level security;
create policy "Users can view their own matches" on matches
  for select using (auth.uid() = user_a or auth.uid() = user_b);
```

### Función: create_match
```sql
create or replace function create_match(user_1 uuid, user_2 uuid)
returns boolean
language plpgsql
security definer
as $$
declare
  user_a uuid;
  user_b uuid;
  match_exists boolean;
begin
  -- Order user IDs to ensure consistency (smaller UUID first)
  if user_1 < user_2 then
    user_a := user_1;
    user_b := user_2;
  else
    user_a := user_2;
    user_b := user_1;
  end if;

  -- Check if match already exists
  select exists(
    select 1 from matches 
    where matches.user_a = create_match.user_a 
    and matches.user_b = create_match.user_b
  ) into match_exists;
  
  -- If match doesn't exist, create it
  if not match_exists then
    insert into matches(user_a, user_b)
    values (user_a, user_b);
    return true;
  else
    return false;
  end if;
end;
$$;
```

2. Crea un archivo `.env.local` en la raíz del proyecto:

```
VITE_SUPABASE_URL=tu_url_de_supabase
VITE_SUPABASE_ANON_KEY=tu_clave_anon_de_supabase
```

3. Instala dependencias y ejecuta el proyecto:

```
npm install
npm run dev
```

## 📱 Optimización móvil

La interfaz está optimizada para dispositivos móviles:
- Navegación inferior accesible con el pulgar
- Tarjetas estilo Tinder para explorar streamers
- Botones grandes para acciones de swipe
- Animaciones suaves de transición
- Modal de Match con diseño atractivo
